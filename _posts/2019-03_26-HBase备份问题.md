---
layout:     post
title:     Transactions for the REST of Us
subtitle:   Transactions for the REST of Us
date:       2019-03-26
author:     老张
header-img: img/post-bg-2015.jpg
catalog: true
tags:
    - TCC
    - Transactions 
    - REST 
typora-copy-images-to: ..\img
typora-root-url: ..

---

# 1. 问题现象

在进行Hbase备份时,遇到如下现象:

1. 增量备份进行了20多次之后程序卡住,没有反映
2. 再次运行备份命令时说有活动的备份在进行,必须手工运行hbase backup repair才能将备份进行下去.

# 2. 问题排查

## 2.1 运行脚本

#### 2.1.1 环境清理

首先运行下列脚本确保环境是干净的,并且使用pe生成10w行的数据进行测试使用:

```bash
set -x
TABLENAME=TABLE1
#hdfs dfs -rmr hdfs://hbase177.ecloud.com:8020/tmp/zws/backup1
#hdfs dfs -mkdir -p hdfs://hbase177.ecloud.com:8020/tmp/zws/backup1/${TABLENAME}


echo 'disable "TABLE1"' |hbase shell -n
echo 'disable "backup:system"' |hbase shell -n
echo 'disable "backup:system_bulk"' |hbase shell -n
echo 'drop "TABLE1"' |hbase shell -n
echo 'drop "backup:system"' |hbase shell -n
echo 'drop "backup:system_bulk"' |hbase shell -n

hdfs dfs -rmr hdfs://hbase177.ecloud.com:8020/tmp/zws/backup1

hdfs dfs -mkdir -p hdfs://hbase177.ecloud.com:8020/tmp/zws/backup1/${TABLENAME}


hbase org.apache.hadoop.hbase.PerformanceEvaluation --nomapred --rows=100000 --table=${TABLENAME} --presplit=2 sequentialWrite 1 
```

#### 2.1.2 首次全量备份

然后对表做一次全量备份:

```bash
set -x
TABLENAME=TABLE1
hbase backup create full  hdfs://hbase177.ecloud.com:8020/tmp/zws/backup1/${TABLENAME}  -t ${TABLENAME}
```

#### 2.1.3 持续增量备份

然后运行下列脚本,不断进行增量备份:

```bash
# incr-backup.sh
set -x
TABLENAME=TABLE1

for i in `seq 1 100`
do
  echo "=========================$i increment times backup"
  hbase backup create incremental   hdfs://hbase177.ecloud.com:8020/tmp/zws/backup1/${TABLENAME}  -t ${TABLENAME}
  if [ $? -ne 0 ]
  then
        echo "exit code $?,exiting"
        exit 1
  fi

  echo "========================================="
done
```



nohup  bash incr-backup.sh 2>&1  & 

运行脚本后,查看nohup日志发现程序出现oom的现象.

## 2.2 OOM分析

1. 首先查看日志,出现了一次MR出错的情况,修改MR的高级配置MR Map Java Heap Size,搜索mx,改为-Xmx3276m,原来为1638M(具体日志没有记录,后来测试发现和这个也关系不大,所以没有贴出故障现象).重跑之后出错信息消失,但是依然会OOM.

2. 看日志发现程序是被kill -9了.经查,Hbase的启动脚本最后面里面有这么一行:

   ```bash
   exec "$JAVA" -Dproc_$COMMAND -XX:OnOutOfMemoryError="kill -9 %p" $HEAP_SETTINGS $HBASE_OPTS $CLASS "$@"
   ```

3. 修改脚本为:

   ```bash
   OOMHANDLER="-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/tmp/heapdump.hprof"
   
   exec "$JAVA" -Dproc_$COMMAND ${OOMHANDLER} $HEAP_SETTINGS $HBASE_OPTS $CLASS "$@"
   ```

4. 在此运行程序,此时程序运行20+次后,在/tmp目录找到了heapdump.hprof文件,下载下来,用MAT分析,得到如下图的结果:

   ![hbase-backup-oom-3](/img/hbase-backup-oom-4.png)
                                                                             图1   内存占用情况
   
   ![hbase-backup-oom](/img/hbase-backup-oom.png)
   
   ​                                                                     图2 大量的BackupImage对象

   ![hbase-backup-oom-2](/img/hbase-backup-oom-2.png)
   
   ​                                                       图3 每个BackupImage里面又包含了非常多的BackupImage对象.

   ![hbase-backup-oom-3](/img/hbase-backup-oom-3.png)
   
   ​                                                图4 backup的清单文件每进行一次备份,大小就会翻倍.
   

## 2.3 代码分析



经过跟踪,问题出现在addManifest的函数调用里,这个函数主要有两个逻辑:

- 获取某个备份的Ancestors

- 将Ancestors序列化成pb存储到HDFS

  OOM发生在序列化阶段

```java
 #org.apache.hadoop.hbase.backup.impl.TableBackupClient#addManifest
 
 protected void addManifest(BackupInfo backupInfo, BackupManager backupManager, BackupType type,
      Configuration conf) throws IOException, BackupException {
    // set the overall backup phase : store manifest
    backupInfo.setPhase(BackupPhase.STORE_MANIFEST);

    BackupManifest manifest;

    // Since we have each table's backup in its own directory structure,
    // we'll store its manifest with the table directory.
    for (TableName table : backupInfo.getTables()) {
      manifest = new BackupManifest(backupInfo, table);
      //注意这里:这里加了个表的过滤,在这个逻辑里面会判断出FULL就返回的,就是说这里的逻辑其实和我们想的是一样的.
      ArrayList<BackupImage> ancestors = backupManager.getAncestors(backupInfo, table);
      for (BackupImage image : ancestors) {
        manifest.addDependentImage(image);
      }

      //注意这里的逻辑,这里的getAncestors是没有加表过滤的,后面的验证里面,如果没有加表的过滤,基本是会把所有的备份都加载进来的.再看上面第12行,这里会遍历所有的表,因此这里有多少表,就会多少遍所有的备份列表进去!
      if (type == BackupType.INCREMENTAL) {
        // We'll store the log timestamps for this table only in its manifest.
        HashMap<TableName, HashMap<String, Long>> tableTimestampMap =
            new HashMap<TableName, HashMap<String, Long>>();
        tableTimestampMap.put(table, backupInfo.getIncrTimestampMap().get(table));
        manifest.setIncrTimestampMap(tableTimestampMap);
          //这里是没有表的过滤的限制的.
        ArrayList<BackupImage> ancestorss = backupManager.getAncestors(backupInfo);
        for (BackupImage image : ancestorss) {
          manifest.addDependentImage(image);
        }
      }
      //保存清单文件
      manifest.store(conf);
    }

    // For incremental backup, we store a overall manifest in
    // <backup-root-dir>/WALs/<backup-id>
    // This is used when created the next incremental backup
     //上面的注释也不太对,找不到WALs目录
     //hdfs dfs -ls -R /tmp/zws/backup1|grep WAL
     //
    if (type == BackupType.INCREMENTAL) {
      manifest = new BackupManifest(backupInfo);
      // set the table region server start and end timestamps for incremental backup
      manifest.setIncrTimestampMap(backupInfo.getIncrTimestampMap());
      ArrayList<BackupImage> ancestors = backupManager.getAncestors(backupInfo);
      for (BackupImage image : ancestors) {
        manifest.addDependentImage(image);
      }
      manifest.store(conf);
    }
  }
```



```bash
 hdfs dfs -ls -R -t /tmp/zws/backup1|grep manifest|awk '{print $5" "$8;}'
 
354 /tmp/zws/backup1/TABLE1/backup_1553575072839/.backup.manifest
711 /tmp/zws/backup1/TABLE1/backup_1553575107214/.backup.manifest
1425 /tmp/zws/backup1/TABLE1/backup_1553575140910/.backup.manifest
2853 /tmp/zws/backup1/TABLE1/backup_1553575176074/.backup.manifest
5709 /tmp/zws/backup1/TABLE1/backup_1553575211100/.backup.manifest
11421 /tmp/zws/backup1/TABLE1/backup_1553575244498/.backup.manifest
22845 /tmp/zws/backup1/TABLE1/backup_1553575277416/.backup.manifest
45694 /tmp/zws/backup1/TABLE1/backup_1553575310422/.backup.manifest
91392 /tmp/zws/backup1/TABLE1/backup_1553575344058/.backup.manifest
182788 /tmp/zws/backup1/TABLE1/backup_1553575377881/.backup.manifest

```

```

​```code
public ArrayList<BackupImage> getAncestors(BackupInfo backupInfo) throws IOException,
      BackupException {
    ...

    ArrayList<BackupImage> ancestors = new ArrayList<BackupImage>();

    // full backup does not have ancestor
    全量备份没有祖先,正解
    if (backupInfo.getType() == BackupType.FULL) {
      LOG.info("Current backup is a full backup, no direct ancestor for it.");
      return ancestors;
    }

    // get all backup history list in descending order
    //获取所有的已完成的备份，按照开始时间进行降序排序
    //Sort history list by start time in descending order.
    ArrayList<BackupInfo> allHistoryList = getBackupHistory(true);
   
    //降序遍历每个备份
    for (BackupInfo backup : allHistoryList) {

      BackupImage.Builder builder = BackupImage.newBuilder();

      BackupImage image = builder.withBackupId(backup.getBackupId()).withType(backup.getType())
          .withRootDir(backup.getBackupRootDir()).withTableList(backup.getTableNames())
          .withStartTime(backup.getStartTs()).withCompleteTime(backup.getCompleteTs()).build();

      // add the full backup image as an ancestor until the last incremental backup
      // 只有连续的FULL,canCoverImage才有可能返回true,一般都是返回false
      if (backup.getType().equals(BackupType.FULL)) {
        // check the backup image coverage, if previous image could be covered by the newer ones,
        // then no need to add
        if (!BackupManifest.canCoverImage(ancestors, image)) {
           ancestors.add(image);
        }
      } else {
        ...
        if (BackupManifest.canCoverImage(ancestors, image)) {
          LOG.info("Met the backup boundary of the current table set:");
          for (BackupImage image1 : ancestors) {
            LOG.info("  BackupID=" + image1.getBackupId() + ", BackupDir=" + image1.getRootDir()+" is parent of "+image.getBackupId());
          }
        } else {
          Path logBackupPath =
              HBackupFileSystem.getBackupPath(backup.getBackupRootDir(), backup.getBackupId());
          // 注意这里的构造函数,这个构造函数会把对应的backup的元数据反序列化一下,结合第22行的for循环
          // 历史里面有多少次循环就会加入多少次这个清单,这里的逻辑是有问题的!
          // 这就是为什么每次增量的时候内存不断增加的原因.
          BackupManifest lastIncrImgManifest = new BackupManifest(conf, logBackupPath);
          BackupImage lastIncrImage = lastIncrImgManifest.getBackupImage();
          //这里是造成递归的主要原因.每个
          ancestors.add(lastIncrImage);
        }
      }
    }
    LOG.info("Got " + ancestors.size() + " ancestors for the current backup.");
    return ancestors;
  }
  
  
  
    public ArrayList<BackupImage> getAncestors(BackupInfo backupInfo, TableName table)
      throws BackupException, IOException {
    //有表过滤的,则加了个FULL的判断逻辑,这里相当于选取了最后的一个全量备份,是我们需要的.
    ArrayList<BackupImage> ancestors = getAncestors(backupInfo);
    ArrayList<BackupImage> tableAncestors = new ArrayList<BackupImage>();
    for (BackupImage image : ancestors) {
      if (image.hasTable(table)) {
        tableAncestors.add(image);
        if (image.getType() == BackupType.FULL) {
          break;
        }
      }
    }
    return tableAncestors;
  }
```



我们对于备份的理解是:

1.首先进行全量备份

2.在全量备份基础上进行增量备份

getBackupHistory这个函数已经按照开始时间进行了倒叙排列,按照上述的理解,对于不断进行的增量备份,在碰到最近一个全量备份时,应该停止查找他的祖先,那些数据不是我们需要的.

因此,在

```java
if (backup.getType().equals(BackupType.FULL)) {
        if (!BackupManifest.canCoverImage(ancestors, image)) {
           ancestors.add(image);
        }
}
```

应该改为如下逻辑:

```java
if (backup.getType().equals(BackupType.FULL)) {
        if (!BackupManifest.canCoverImage(ancestors, image)) {
           ancestors.add(image);
        }
    //截止到这里,应该是找到了所有的ancestors了,应该跳出循环
    break;
}
```

增加第六行的break逻辑.



***因为备份是按照时间进行倒叙排序的,所以找到最开始的一条FULL的时候就应该返回了.***



修改此代码后,使用如下测试脚本进行测试:

每10次增量备份之后进行一次全量备份,确保最后的一次增量备份的元数据不会因为20次而OOM.

```bash
for i in `seq 1 200`
do
  echo "=========================$i increment times backup"
  hbase backup create incremental   hdfs://hbase177.ecloud.com:8020/tmp/zws/backup1/${TABLENAME}  -t ${TABLENAME}
  if [ $? -ne 0 ]
  then
        echo "exit code $?,exiting"
        exit 1
  fi

  ddd=`expr $i % 10`
  if [ $ddd -eq 0 ]
  then
      echo "full backup ,i=$i"
      hbase backup create full   hdfs://hbase177.ecloud.com:8020/tmp/zws/backup1/${TABLENAME}  -t ${TABLENAME}
  fi
  if [ $? -ne 0 ]
  then
        echo "exit code $?,exiting"
        exit 1
  fi
  echo "========================================="
done
```



经测试,程序能够正常运行完毕.



总结一下:两处导致了程序有问题:

1. org.apache.hadoop.hbase.backup.impl.BackupManager#getAncestors(org.apache.hadoop.hbase.backup.BackupInfo)函数返回了全部的备份历史!

2. getAncestors函数里面,针对历史的备份BackupManifest都会反序列化,加入到祖先里面去,这就是为什么每次清单数据和内存数据

   这里就解释了上面截图的原因,每次祖先都返回历史数据,每次备份里面都把以前的备份数据反序列化后作为自己的祖先.

## 备注

自己写了段程序,验证hbase的ancestor的数据,用来显示修改前后的差异:

### 1.HBase备份历史,跑了两百次的备份

```bash
{ID=backup_1553575767098 Type=FULL Start time=Tue Mar 26 12:49:27 CST 2019
{ID=backup_1553575733149 Type=INCREMENTAL Start time=Tue Mar 26 12:48:53 CST 2019
{ID=backup_1553575697465 Type=INCREMENTAL Start time=Tue Mar 26 12:48:18 CST 2019
{ID=backup_1553575663988 Type=INCREMENTAL Start time=Tue Mar 26 12:47:44 CST 2019
{ID=backup_1553575631417 Type=INCREMENTAL Start time=Tue Mar 26 12:47:12 CST 2019
{ID=backup_1553575598057 Type=INCREMENTAL Start time=Tue Mar 26 12:46:38 CST 2019
{ID=backup_1553575563883 Type=INCREMENTAL Start time=Tue Mar 26 12:46:04 CST 2019
{ID=backup_1553575529566 Type=INCREMENTAL Start time=Tue Mar 26 12:45:30 CST 2019
{ID=backup_1553575496314 Type=INCREMENTAL Start time=Tue Mar 26 12:44:56 CST 2019
{ID=backup_1553575462550 Type=INCREMENTAL Start time=Tue Mar 26 12:44:23 CST 2019
{ID=backup_1553575430172 Type=INCREMENTAL Start time=Tue Mar 26 12:43:50 CST 2019
{ID=backup_1553575412175 Type=FULL Start time=Tue Mar 26 12:43:33 CST 2019
{ID=backup_1553575377881 Type=INCREMENTAL Start time=Tue Mar 26 12:42:58 CST 2019
{ID=backup_1553575344058 Type=INCREMENTAL Start time=Tue Mar 26 12:42:24 CST 2019
{ID=backup_1553575310422 Type=INCREMENTAL Start time=Tue Mar 26 12:41:51 CST 2019
{ID=backup_1553575277416 Type=INCREMENTAL Start time=Tue Mar 26 12:41:17 CST 2019
{ID=backup_1553575244498 Type=INCREMENTAL Start time=Tue Mar 26 12:40:45 CST 2019
{ID=backup_1553575211100 Type=INCREMENTAL Start time=Tue Mar 26 12:40:11 CST 2019
{ID=backup_1553575176074 Type=INCREMENTAL Start time=Tue Mar 26 12:39:36 CST 2019
{ID=backup_1553575140910 Type=INCREMENTAL Start time=Tue Mar 26 12:39:01 CST 2019
{ID=backup_1553575107214 Type=INCREMENTAL Start time=Tue Mar 26 12:38:27 CST 2019
{ID=backup_1553575072839 Type=INCREMENTAL Start time=Tue Mar 26 12:37:53 CST 2019
{ID=backup_1553575054529 Type=FULL Start time=Tue Mar 26 12:37:35 CST 2019
{ID=backup_1553575020441 Type=INCREMENTAL Start time=Tue Mar 26 12:37:01 CST 2019
{ID=backup_1553574985907 Type=INCREMENTAL Start time=Tue Mar 26 12:36:26 CST 2019
{ID=backup_1553574953490 Type=INCREMENTAL Start time=Tue Mar 26 12:35:54 CST 2019
{ID=backup_1553574919155 Type=INCREMENTAL Start time=Tue Mar 26 12:35:19 CST 2019
{ID=backup_1553574885585 Type=INCREMENTAL Start time=Tue Mar 26 12:34:46 CST 2019
{ID=backup_1553574851370 Type=INCREMENTAL Start time=Tue Mar 26 12:34:11 CST 2019
{ID=backup_1553574818990 Type=INCREMENTAL Start time=Tue Mar 26 12:33:39 CST 2019
{ID=backup_1553574784417 Type=INCREMENTAL Start time=Tue Mar 26 12:33:05 CST 2019
{ID=backup_1553574751080 Type=INCREMENTAL Start time=Tue Mar 26 12:32:31 CST 2019
{ID=backup_1553574719085 Type=INCREMENTAL Start time=Tue Mar 26 12:31:59 CST 2019
{ID=backup_1553574700951 Type=FULL Start time=Tue Mar 26 12:31:41 CST 2019
{ID=backup_1553574667325 Type=INCREMENTAL Start time=Tue Mar 26 12:31:07 CST 2019
{ID=backup_1553574632551 Type=INCREMENTAL Start time=Tue Mar 26 12:30:33 CST 2019
{ID=backup_1553574598101 Type=INCREMENTAL Start time=Tue Mar 26 12:29:58 CST 2019
{ID=backup_1553574565059 Type=INCREMENTAL Start time=Tue Mar 26 12:29:25 CST 2019
{ID=backup_1553574531199 Type=INCREMENTAL Start time=Tue Mar 26 12:28:51 CST 2019
{ID=backup_1553574497825 Type=INCREMENTAL Start time=Tue Mar 26 12:28:18 CST 2019
{ID=backup_1553574464306 Type=INCREMENTAL Start time=Tue Mar 26 12:27:44 CST 2019
{ID=backup_1553574429743 Type=INCREMENTAL Start time=Tue Mar 26 12:27:10 CST 2019
{ID=backup_1553574397548 Type=INCREMENTAL Start time=Tue Mar 26 12:26:38 CST 2019
{ID=backup_1553574364319 Type=INCREMENTAL Start time=Tue Mar 26 12:26:04 CST 2019
{ID=backup_1553574345909 Type=FULL Start time=Tue Mar 26 12:25:46 CST 2019
{ID=backup_1553574312373 Type=INCREMENTAL Start time=Tue Mar 26 12:25:13 CST 2019
{ID=backup_1553574278283 Type=INCREMENTAL Start time=Tue Mar 26 12:24:38 CST 2019
{ID=backup_1553574244171 Type=INCREMENTAL Start time=Tue Mar 26 12:24:04 CST 2019
{ID=backup_1553574209761 Type=INCREMENTAL Start time=Tue Mar 26 12:23:30 CST 2019
{ID=backup_1553574173520 Type=INCREMENTAL Start time=Tue Mar 26 12:22:54 CST 2019
{ID=backup_1553574140857 Type=INCREMENTAL Start time=Tue Mar 26 12:22:21 CST 2019
{ID=backup_1553574106633 Type=INCREMENTAL Start time=Tue Mar 26 12:21:47 CST 2019
{ID=backup_1553574072761 Type=INCREMENTAL Start time=Tue Mar 26 12:21:13 CST 2019
{ID=backup_1553574040004 Type=INCREMENTAL Start time=Tue Mar 26 12:20:40 CST 2019
{ID=backup_1553574006745 Type=INCREMENTAL Start time=Tue Mar 26 12:20:07 CST 2019
{ID=backup_1553573988367 Type=FULL Start time=Tue Mar 26 12:19:48 CST 2019
{ID=backup_1553573954196 Type=INCREMENTAL Start time=Tue Mar 26 12:19:14 CST 2019
{ID=backup_1553573920196 Type=INCREMENTAL Start time=Tue Mar 26 12:18:40 CST 2019
{ID=backup_1553573886733 Type=INCREMENTAL Start time=Tue Mar 26 12:18:07 CST 2019
{ID=backup_1553573853819 Type=INCREMENTAL Start time=Tue Mar 26 12:17:34 CST 2019
{ID=backup_1553573821533 Type=INCREMENTAL Start time=Tue Mar 26 12:17:02 CST 2019
{ID=backup_1553573789015 Type=INCREMENTAL Start time=Tue Mar 26 12:16:29 CST 2019
{ID=backup_1553573755510 Type=INCREMENTAL Start time=Tue Mar 26 12:15:56 CST 2019
{ID=backup_1553573721575 Type=INCREMENTAL Start time=Tue Mar 26 12:15:22 CST 2019
{ID=backup_1553573687017 Type=INCREMENTAL Start time=Tue Mar 26 12:14:47 CST 2019
{ID=backup_1553573652589 Type=INCREMENTAL Start time=Tue Mar 26 12:14:13 CST 2019
{ID=backup_1553573634136 Type=FULL Start time=Tue Mar 26 12:13:54 CST 2019
{ID=backup_1553573599341 Type=INCREMENTAL Start time=Tue Mar 26 12:13:19 CST 2019
{ID=backup_1553573565195 Type=INCREMENTAL Start time=Tue Mar 26 12:12:45 CST 2019
{ID=backup_1553573531253 Type=INCREMENTAL Start time=Tue Mar 26 12:12:11 CST 2019
{ID=backup_1553573497863 Type=INCREMENTAL Start time=Tue Mar 26 12:11:38 CST 2019
{ID=backup_1553573464267 Type=INCREMENTAL Start time=Tue Mar 26 12:11:04 CST 2019
{ID=backup_1553573429411 Type=INCREMENTAL Start time=Tue Mar 26 12:10:30 CST 2019
{ID=backup_1553573395797 Type=INCREMENTAL Start time=Tue Mar 26 12:09:56 CST 2019
{ID=backup_1553573359100 Type=INCREMENTAL Start time=Tue Mar 26 12:09:19 CST 2019
{ID=backup_1553573325386 Type=INCREMENTAL Start time=Tue Mar 26 12:08:45 CST 2019
{ID=backup_1553573291915 Type=INCREMENTAL Start time=Tue Mar 26 12:08:12 CST 2019
{ID=backup_1553573274094 Type=FULL Start time=Tue Mar 26 12:07:54 CST 2019
{ID=backup_1553573240102 Type=INCREMENTAL Start time=Tue Mar 26 12:07:20 CST 2019
{ID=backup_1553573206246 Type=INCREMENTAL Start time=Tue Mar 26 12:06:46 CST 2019
{ID=backup_1553573172980 Type=INCREMENTAL Start time=Tue Mar 26 12:06:13 CST 2019
{ID=backup_1553573138808 Type=INCREMENTAL Start time=Tue Mar 26 12:05:39 CST 2019
{ID=backup_1553573104959 Type=INCREMENTAL Start time=Tue Mar 26 12:05:05 CST 2019
{ID=backup_1553573072418 Type=INCREMENTAL Start time=Tue Mar 26 12:04:33 CST 2019
{ID=backup_1553573037477 Type=INCREMENTAL Start time=Tue Mar 26 12:03:59 CST 2019
{ID=backup_1553573003850 Type=INCREMENTAL Start time=Tue Mar 26 12:03:24 CST 2019
{ID=backup_1553572969906 Type=INCREMENTAL Start time=Tue Mar 26 12:02:50 CST 2019
{ID=backup_1553572936870 Type=INCREMENTAL Start time=Tue Mar 26 12:02:17 CST 2019
{ID=backup_1553572919152 Type=FULL Start time=Tue Mar 26 12:01:59 CST 2019
{ID=backup_1553572884567 Type=INCREMENTAL Start time=Tue Mar 26 12:01:25 CST 2019
{ID=backup_1553572850231 Type=INCREMENTAL Start time=Tue Mar 26 12:00:50 CST 2019
{ID=backup_1553572815904 Type=INCREMENTAL Start time=Tue Mar 26 12:00:16 CST 2019
{ID=backup_1553572782582 Type=INCREMENTAL Start time=Tue Mar 26 11:59:43 CST 2019
{ID=backup_1553572749277 Type=INCREMENTAL Start time=Tue Mar 26 11:59:09 CST 2019
{ID=backup_1553572715583 Type=INCREMENTAL Start time=Tue Mar 26 11:58:36 CST 2019
{ID=backup_1553572681192 Type=INCREMENTAL Start time=Tue Mar 26 11:58:01 CST 2019
{ID=backup_1553572647241 Type=INCREMENTAL Start time=Tue Mar 26 11:57:27 CST 2019
{ID=backup_1553572614147 Type=INCREMENTAL Start time=Tue Mar 26 11:56:55 CST 2019
{ID=backup_1553572580295 Type=INCREMENTAL Start time=Tue Mar 26 11:56:20 CST 2019
{ID=backup_1553572562604 Type=FULL Start time=Tue Mar 26 11:56:03 CST 2019
{ID=backup_1553572528808 Type=INCREMENTAL Start time=Tue Mar 26 11:55:29 CST 2019
{ID=backup_1553572495824 Type=INCREMENTAL Start time=Tue Mar 26 11:54:56 CST 2019
{ID=backup_1553572460686 Type=INCREMENTAL Start time=Tue Mar 26 11:54:21 CST 2019
{ID=backup_1553572426623 Type=INCREMENTAL Start time=Tue Mar 26 11:53:47 CST 2019
{ID=backup_1553572393393 Type=INCREMENTAL Start time=Tue Mar 26 11:53:13 CST 2019
{ID=backup_1553572358905 Type=INCREMENTAL Start time=Tue Mar 26 11:52:39 CST 2019
{ID=backup_1553572325680 Type=INCREMENTAL Start time=Tue Mar 26 11:52:06 CST 2019
{ID=backup_1553572293384 Type=INCREMENTAL Start time=Tue Mar 26 11:51:33 CST 2019
{ID=backup_1553572259858 Type=INCREMENTAL Start time=Tue Mar 26 11:51:00 CST 2019
{ID=backup_1553572226776 Type=INCREMENTAL Start time=Tue Mar 26 11:50:27 CST 2019
{ID=backup_1553572209043 Type=FULL Start time=Tue Mar 26 11:50:09 CST 2019
{ID=backup_1553572176192 Type=INCREMENTAL Start time=Tue Mar 26 11:49:36 CST 2019
{ID=backup_1553572142467 Type=INCREMENTAL Start time=Tue Mar 26 11:49:03 CST 2019
{ID=backup_1553572108243 Type=INCREMENTAL Start time=Tue Mar 26 11:48:28 CST 2019
{ID=backup_1553572074607 Type=INCREMENTAL Start time=Tue Mar 26 11:47:55 CST 2019
{ID=backup_1553572040817 Type=INCREMENTAL Start time=Tue Mar 26 11:47:21 CST 2019
{ID=backup_1553572008463 Type=INCREMENTAL Start time=Tue Mar 26 11:46:49 CST 2019
{ID=backup_1553571975869 Type=INCREMENTAL Start time=Tue Mar 26 11:46:16 CST 2019
{ID=backup_1553571942648 Type=INCREMENTAL Start time=Tue Mar 26 11:45:43 CST 2019
{ID=backup_1553571909287 Type=INCREMENTAL Start time=Tue Mar 26 11:45:09 CST 2019
{ID=backup_1553571876299 Type=INCREMENTAL Start time=Tue Mar 26 11:44:36 CST 2019
{ID=backup_1553571858272 Type=FULL Start time=Tue Mar 26 11:44:18 CST 2019
{ID=backup_1553571823420 Type=INCREMENTAL Start time=Tue Mar 26 11:43:44 CST 2019
{ID=backup_1553571790811 Type=INCREMENTAL Start time=Tue Mar 26 11:43:11 CST 2019
{ID=backup_1553571759170 Type=INCREMENTAL Start time=Tue Mar 26 11:42:39 CST 2019
{ID=backup_1553571725809 Type=INCREMENTAL Start time=Tue Mar 26 11:42:06 CST 2019
{ID=backup_1553571691424 Type=INCREMENTAL Start time=Tue Mar 26 11:41:32 CST 2019
{ID=backup_1553571659257 Type=INCREMENTAL Start time=Tue Mar 26 11:40:59 CST 2019
{ID=backup_1553571624585 Type=INCREMENTAL Start time=Tue Mar 26 11:40:25 CST 2019
{ID=backup_1553571592803 Type=INCREMENTAL Start time=Tue Mar 26 11:39:53 CST 2019
{ID=backup_1553571558839 Type=INCREMENTAL Start time=Tue Mar 26 11:39:19 CST 2019
{ID=backup_1553571524437 Type=INCREMENTAL Start time=Tue Mar 26 11:38:45 CST 2019
{ID=backup_1553571506120 Type=FULL Start time=Tue Mar 26 11:38:26 CST 2019
{ID=backup_1553571471600 Type=INCREMENTAL Start time=Tue Mar 26 11:37:52 CST 2019
{ID=backup_1553571436202 Type=INCREMENTAL Start time=Tue Mar 26 11:37:16 CST 2019
{ID=backup_1553571403407 Type=INCREMENTAL Start time=Tue Mar 26 11:36:44 CST 2019
{ID=backup_1553571369423 Type=INCREMENTAL Start time=Tue Mar 26 11:36:10 CST 2019
{ID=backup_1553571336727 Type=INCREMENTAL Start time=Tue Mar 26 11:35:37 CST 2019
{ID=backup_1553571302148 Type=INCREMENTAL Start time=Tue Mar 26 11:35:02 CST 2019
{ID=backup_1553571267456 Type=INCREMENTAL Start time=Tue Mar 26 11:34:28 CST 2019
{ID=backup_1553571233365 Type=INCREMENTAL Start time=Tue Mar 26 11:33:53 CST 2019
{ID=backup_1553571201284 Type=INCREMENTAL Start time=Tue Mar 26 11:33:21 CST 2019
{ID=backup_1553571167438 Type=INCREMENTAL Start time=Tue Mar 26 11:32:48 CST 2019
{ID=backup_1553571149727 Type=FULL Start time=Tue Mar 26 11:32:30 CST 2019
{ID=backup_1553571116593 Type=INCREMENTAL Start time=Tue Mar 26 11:31:57 CST 2019
{ID=backup_1553571082945 Type=INCREMENTAL Start time=Tue Mar 26 11:31:24 CST 2019
{ID=backup_1553571048494 Type=INCREMENTAL Start time=Tue Mar 26 11:30:49 CST 2019
{ID=backup_1553571014719 Type=INCREMENTAL Start time=Tue Mar 26 11:30:15 CST 2019
{ID=backup_1553570981112 Type=INCREMENTAL Start time=Tue Mar 26 11:29:41 CST 2019
{ID=backup_1553570947686 Type=INCREMENTAL Start time=Tue Mar 26 11:29:08 CST 2019
{ID=backup_1553570915448 Type=INCREMENTAL Start time=Tue Mar 26 11:28:36 CST 2019
{ID=backup_1553570881136 Type=INCREMENTAL Start time=Tue Mar 26 11:28:01 CST 2019
{ID=backup_1553570848863 Type=INCREMENTAL Start time=Tue Mar 26 11:27:29 CST 2019
{ID=backup_1553570814005 Type=INCREMENTAL Start time=Tue Mar 26 11:26:54 CST 2019
{ID=backup_1553570796483 Type=FULL Start time=Tue Mar 26 11:26:37 CST 2019
{ID=backup_1553570761146 Type=INCREMENTAL Start time=Tue Mar 26 11:26:02 CST 2019
{ID=backup_1553570727246 Type=INCREMENTAL Start time=Tue Mar 26 11:25:27 CST 2019
{ID=backup_1553570694734 Type=INCREMENTAL Start time=Tue Mar 26 11:24:55 CST 2019
{ID=backup_1553570660492 Type=INCREMENTAL Start time=Tue Mar 26 11:24:21 CST 2019
{ID=backup_1553570626886 Type=INCREMENTAL Start time=Tue Mar 26 11:23:47 CST 2019
{ID=backup_1553570593820 Type=INCREMENTAL Start time=Tue Mar 26 11:23:14 CST 2019
{ID=backup_1553570560504 Type=INCREMENTAL Start time=Tue Mar 26 11:22:41 CST 2019
{ID=backup_1553570526852 Type=INCREMENTAL Start time=Tue Mar 26 11:22:07 CST 2019
{ID=backup_1553570492791 Type=INCREMENTAL Start time=Tue Mar 26 11:21:33 CST 2019
{ID=backup_1553570460561 Type=INCREMENTAL Start time=Tue Mar 26 11:21:01 CST 2019
{ID=backup_1553570441834 Type=FULL Start time=Tue Mar 26 11:20:42 CST 2019
{ID=backup_1553570407694 Type=INCREMENTAL Start time=Tue Mar 26 11:20:08 CST 2019
{ID=backup_1553570374275 Type=INCREMENTAL Start time=Tue Mar 26 11:19:34 CST 2019
{ID=backup_1553570339643 Type=INCREMENTAL Start time=Tue Mar 26 11:19:00 CST 2019
{ID=backup_1553570306426 Type=INCREMENTAL Start time=Tue Mar 26 11:18:27 CST 2019
{ID=backup_1553570273789 Type=INCREMENTAL Start time=Tue Mar 26 11:17:54 CST 2019
{ID=backup_1553570241672 Type=INCREMENTAL Start time=Tue Mar 26 11:17:22 CST 2019
{ID=backup_1553570208779 Type=INCREMENTAL Start time=Tue Mar 26 11:16:50 CST 2019
{ID=backup_1553570174016 Type=INCREMENTAL Start time=Tue Mar 26 11:16:14 CST 2019
{ID=backup_1553570140527 Type=INCREMENTAL Start time=Tue Mar 26 11:15:41 CST 2019
{ID=backup_1553570108155 Type=INCREMENTAL Start time=Tue Mar 26 11:15:08 CST 2019
{ID=backup_1553570090313 Type=FULL Start time=Tue Mar 26 11:14:50 CST 2019
{ID=backup_1553570055163 Type=INCREMENTAL Start time=Tue Mar 26 11:14:15 CST 2019
{ID=backup_1553570020547 Type=INCREMENTAL Start time=Tue Mar 26 11:13:41 CST 2019
{ID=backup_1553569986366 Type=INCREMENTAL Start time=Tue Mar 26 11:13:06 CST 2019
{ID=backup_1553569952111 Type=INCREMENTAL Start time=Tue Mar 26 11:12:32 CST 2019
{ID=backup_1553569919009 Type=INCREMENTAL Start time=Tue Mar 26 11:11:59 CST 2019
{ID=backup_1553569884803 Type=INCREMENTAL Start time=Tue Mar 26 11:11:25 CST 2019
{ID=backup_1553569852375 Type=INCREMENTAL Start time=Tue Mar 26 11:10:52 CST 2019
{ID=backup_1553569817578 Type=INCREMENTAL Start time=Tue Mar 26 11:10:18 CST 2019
{ID=backup_1553569783289 Type=INCREMENTAL Start time=Tue Mar 26 11:09:44 CST 2019
{ID=backup_1553569749812 Type=INCREMENTAL Start time=Tue Mar 26 11:09:10 CST 2019
{ID=backup_1553569731577 Type=FULL Start time=Tue Mar 26 11:08:52 CST 2019
{ID=backup_1553569696659 Type=INCREMENTAL Start time=Tue Mar 26 11:08:17 CST 2019
{ID=backup_1553569662598 Type=INCREMENTAL Start time=Tue Mar 26 11:07:43 CST 2019
{ID=backup_1553569629577 Type=INCREMENTAL Start time=Tue Mar 26 11:07:10 CST 2019
{ID=backup_1553569593132 Type=INCREMENTAL Start time=Tue Mar 26 11:06:34 CST 2019
{ID=backup_1553569561007 Type=INCREMENTAL Start time=Tue Mar 26 11:06:01 CST 2019
{ID=backup_1553569528701 Type=INCREMENTAL Start time=Tue Mar 26 11:05:29 CST 2019
{ID=backup_1553569494753 Type=INCREMENTAL Start time=Tue Mar 26 11:04:55 CST 2019
{ID=backup_1553569461159 Type=INCREMENTAL Start time=Tue Mar 26 11:04:21 CST 2019
{ID=backup_1553569427652 Type=INCREMENTAL Start time=Tue Mar 26 11:03:48 CST 2019
{ID=backup_1553569394396 Type=INCREMENTAL Start time=Tue Mar 26 11:03:15 CST 2019
{ID=backup_1553569374305 Type=FULL Start time=Tue Mar 26 11:02:54 CST 2019
{ID=backup_1553569340317 Type=INCREMENTAL Start time=Tue Mar 26 11:02:21 CST 2019
{ID=backup_1553569305158 Type=INCREMENTAL Start time=Tue Mar 26 11:01:46 CST 2019
{ID=backup_1553569272118 Type=INCREMENTAL Start time=Tue Mar 26 11:01:12 CST 2019
{ID=backup_1553569238667 Type=INCREMENTAL Start time=Tue Mar 26 11:00:39 CST 2019
{ID=backup_1553569204981 Type=INCREMENTAL Start time=Tue Mar 26 11:00:05 CST 2019
{ID=backup_1553569171706 Type=INCREMENTAL Start time=Tue Mar 26 10:59:32 CST 2019
{ID=backup_1553569138310 Type=INCREMENTAL Start time=Tue Mar 26 10:58:58 CST 2019
{ID=backup_1553569105743 Type=INCREMENTAL Start time=Tue Mar 26 10:58:26 CST 2019
{ID=backup_1553569071814 Type=INCREMENTAL Start time=Tue Mar 26 10:57:52 CST 2019
{ID=backup_1553569039555 Type=INCREMENTAL Start time=Tue Mar 26 10:57:20 CST 2019
{ID=backup_1553569021766 Type=FULL Start time=Tue Mar 26 10:57:02 CST 2019
{ID=backup_1553568986090 Type=INCREMENTAL Start time=Tue Mar 26 10:56:26 CST 2019
{ID=backup_1553568952403 Type=INCREMENTAL Start time=Tue Mar 26 10:55:53 CST 2019
{ID=backup_1553568919171 Type=INCREMENTAL Start time=Tue Mar 26 10:55:19 CST 2019
{ID=backup_1553568886292 Type=INCREMENTAL Start time=Tue Mar 26 10:54:46 CST 2019
{ID=backup_1553568850320 Type=INCREMENTAL Start time=Tue Mar 26 10:54:10 CST 2019
{ID=backup_1553568815987 Type=INCREMENTAL Start time=Tue Mar 26 10:53:36 CST 2019
{ID=backup_1553568783057 Type=INCREMENTAL Start time=Tue Mar 26 10:53:03 CST 2019
{ID=backup_1553568748571 Type=INCREMENTAL Start time=Tue Mar 26 10:52:29 CST 2019
{ID=backup_1553568716320 Type=INCREMENTAL Start time=Tue Mar 26 10:51:56 CST 2019
{ID=backup_1553568682965 Type=INCREMENTAL Start time=Tue Mar 26 10:51:23 CST 2019
{ID=backup_1553568663637 Type=FULL Start time=Tue Mar 26 10:51:04 CST 2019
[hdfs@hbase177 ~]$ cat HISTORY.short 
{ID=backup_1553575767098 Type=FULL Start time=Tue Mar 26 12:49:27 CST 2019
{ID=backup_1553575733149 Type=INCREMENTAL Start time=Tue Mar 26 12:48:53 CST 2019
{ID=backup_1553575697465 Type=INCREMENTAL Start time=Tue Mar 26 12:48:18 CST 2019
{ID=backup_1553575663988 Type=INCREMENTAL Start time=Tue Mar 26 12:47:44 CST 2019
{ID=backup_1553575631417 Type=INCREMENTAL Start time=Tue Mar 26 12:47:12 CST 2019
{ID=backup_1553575598057 Type=INCREMENTAL Start time=Tue Mar 26 12:46:38 CST 2019
{ID=backup_1553575563883 Type=INCREMENTAL Start time=Tue Mar 26 12:46:04 CST 2019
{ID=backup_1553575529566 Type=INCREMENTAL Start time=Tue Mar 26 12:45:30 CST 2019
{ID=backup_1553575496314 Type=INCREMENTAL Start time=Tue Mar 26 12:44:56 CST 2019
{ID=backup_1553575462550 Type=INCREMENTAL Start time=Tue Mar 26 12:44:23 CST 2019
{ID=backup_1553575430172 Type=INCREMENTAL Start time=Tue Mar 26 12:43:50 CST 2019
{ID=backup_1553575412175 Type=FULL Start time=Tue Mar 26 12:43:33 CST 2019
{ID=backup_1553575377881 Type=INCREMENTAL Start time=Tue Mar 26 12:42:58 CST 2019
{ID=backup_1553575344058 Type=INCREMENTAL Start time=Tue Mar 26 12:42:24 CST 2019
{ID=backup_1553575310422 Type=INCREMENTAL Start time=Tue Mar 26 12:41:51 CST 2019
{ID=backup_1553575277416 Type=INCREMENTAL Start time=Tue Mar 26 12:41:17 CST 2019
{ID=backup_1553575244498 Type=INCREMENTAL Start time=Tue Mar 26 12:40:45 CST 2019
{ID=backup_1553575211100 Type=INCREMENTAL Start time=Tue Mar 26 12:40:11 CST 2019
{ID=backup_1553575176074 Type=INCREMENTAL Start time=Tue Mar 26 12:39:36 CST 2019
{ID=backup_1553575140910 Type=INCREMENTAL Start time=Tue Mar 26 12:39:01 CST 2019
{ID=backup_1553575107214 Type=INCREMENTAL Start time=Tue Mar 26 12:38:27 CST 2019
{ID=backup_1553575072839 Type=INCREMENTAL Start time=Tue Mar 26 12:37:53 CST 2019
{ID=backup_1553575054529 Type=FULL Start time=Tue Mar 26 12:37:35 CST 2019
{ID=backup_1553575020441 Type=INCREMENTAL Start time=Tue Mar 26 12:37:01 CST 2019
{ID=backup_1553574985907 Type=INCREMENTAL Start time=Tue Mar 26 12:36:26 CST 2019
{ID=backup_1553574953490 Type=INCREMENTAL Start time=Tue Mar 26 12:35:54 CST 2019
{ID=backup_1553574919155 Type=INCREMENTAL Start time=Tue Mar 26 12:35:19 CST 2019
{ID=backup_1553574885585 Type=INCREMENTAL Start time=Tue Mar 26 12:34:46 CST 2019
{ID=backup_1553574851370 Type=INCREMENTAL Start time=Tue Mar 26 12:34:11 CST 2019
{ID=backup_1553574818990 Type=INCREMENTAL Start time=Tue Mar 26 12:33:39 CST 2019
{ID=backup_1553574784417 Type=INCREMENTAL Start time=Tue Mar 26 12:33:05 CST 2019
{ID=backup_1553574751080 Type=INCREMENTAL Start time=Tue Mar 26 12:32:31 CST 2019
{ID=backup_1553574719085 Type=INCREMENTAL Start time=Tue Mar 26 12:31:59 CST 2019
{ID=backup_1553574700951 Type=FULL Start time=Tue Mar 26 12:31:41 CST 2019
{ID=backup_1553574667325 Type=INCREMENTAL Start time=Tue Mar 26 12:31:07 CST 2019
{ID=backup_1553574632551 Type=INCREMENTAL Start time=Tue Mar 26 12:30:33 CST 2019
{ID=backup_1553574598101 Type=INCREMENTAL Start time=Tue Mar 26 12:29:58 CST 2019
{ID=backup_1553574565059 Type=INCREMENTAL Start time=Tue Mar 26 12:29:25 CST 2019
{ID=backup_1553574531199 Type=INCREMENTAL Start time=Tue Mar 26 12:28:51 CST 2019
{ID=backup_1553574497825 Type=INCREMENTAL Start time=Tue Mar 26 12:28:18 CST 2019
{ID=backup_1553574464306 Type=INCREMENTAL Start time=Tue Mar 26 12:27:44 CST 2019
{ID=backup_1553574429743 Type=INCREMENTAL Start time=Tue Mar 26 12:27:10 CST 2019
{ID=backup_1553574397548 Type=INCREMENTAL Start time=Tue Mar 26 12:26:38 CST 2019
{ID=backup_1553574364319 Type=INCREMENTAL Start time=Tue Mar 26 12:26:04 CST 2019
{ID=backup_1553574345909 Type=FULL Start time=Tue Mar 26 12:25:46 CST 2019
{ID=backup_1553574312373 Type=INCREMENTAL Start time=Tue Mar 26 12:25:13 CST 2019
{ID=backup_1553574278283 Type=INCREMENTAL Start time=Tue Mar 26 12:24:38 CST 2019
{ID=backup_1553574244171 Type=INCREMENTAL Start time=Tue Mar 26 12:24:04 CST 2019
{ID=backup_1553574209761 Type=INCREMENTAL Start time=Tue Mar 26 12:23:30 CST 2019
{ID=backup_1553574173520 Type=INCREMENTAL Start time=Tue Mar 26 12:22:54 CST 2019
{ID=backup_1553574140857 Type=INCREMENTAL Start time=Tue Mar 26 12:22:21 CST 2019
{ID=backup_1553574106633 Type=INCREMENTAL Start time=Tue Mar 26 12:21:47 CST 2019
{ID=backup_1553574072761 Type=INCREMENTAL Start time=Tue Mar 26 12:21:13 CST 2019
{ID=backup_1553574040004 Type=INCREMENTAL Start time=Tue Mar 26 12:20:40 CST 2019
{ID=backup_1553574006745 Type=INCREMENTAL Start time=Tue Mar 26 12:20:07 CST 2019
{ID=backup_1553573988367 Type=FULL Start time=Tue Mar 26 12:19:48 CST 2019
{ID=backup_1553573954196 Type=INCREMENTAL Start time=Tue Mar 26 12:19:14 CST 2019
{ID=backup_1553573920196 Type=INCREMENTAL Start time=Tue Mar 26 12:18:40 CST 2019
{ID=backup_1553573886733 Type=INCREMENTAL Start time=Tue Mar 26 12:18:07 CST 2019
{ID=backup_1553573853819 Type=INCREMENTAL Start time=Tue Mar 26 12:17:34 CST 2019
{ID=backup_1553573821533 Type=INCREMENTAL Start time=Tue Mar 26 12:17:02 CST 2019
{ID=backup_1553573789015 Type=INCREMENTAL Start time=Tue Mar 26 12:16:29 CST 2019
{ID=backup_1553573755510 Type=INCREMENTAL Start time=Tue Mar 26 12:15:56 CST 2019
{ID=backup_1553573721575 Type=INCREMENTAL Start time=Tue Mar 26 12:15:22 CST 2019
{ID=backup_1553573687017 Type=INCREMENTAL Start time=Tue Mar 26 12:14:47 CST 2019
{ID=backup_1553573652589 Type=INCREMENTAL Start time=Tue Mar 26 12:14:13 CST 2019
{ID=backup_1553573634136 Type=FULL Start time=Tue Mar 26 12:13:54 CST 2019
{ID=backup_1553573599341 Type=INCREMENTAL Start time=Tue Mar 26 12:13:19 CST 2019
{ID=backup_1553573565195 Type=INCREMENTAL Start time=Tue Mar 26 12:12:45 CST 2019
{ID=backup_1553573531253 Type=INCREMENTAL Start time=Tue Mar 26 12:12:11 CST 2019
{ID=backup_1553573497863 Type=INCREMENTAL Start time=Tue Mar 26 12:11:38 CST 2019
{ID=backup_1553573464267 Type=INCREMENTAL Start time=Tue Mar 26 12:11:04 CST 2019
{ID=backup_1553573429411 Type=INCREMENTAL Start time=Tue Mar 26 12:10:30 CST 2019
{ID=backup_1553573395797 Type=INCREMENTAL Start time=Tue Mar 26 12:09:56 CST 2019
{ID=backup_1553573359100 Type=INCREMENTAL Start time=Tue Mar 26 12:09:19 CST 2019
{ID=backup_1553573325386 Type=INCREMENTAL Start time=Tue Mar 26 12:08:45 CST 2019
{ID=backup_1553573291915 Type=INCREMENTAL Start time=Tue Mar 26 12:08:12 CST 2019
{ID=backup_1553573274094 Type=FULL Start time=Tue Mar 26 12:07:54 CST 2019
{ID=backup_1553573240102 Type=INCREMENTAL Start time=Tue Mar 26 12:07:20 CST 2019
{ID=backup_1553573206246 Type=INCREMENTAL Start time=Tue Mar 26 12:06:46 CST 2019
{ID=backup_1553573172980 Type=INCREMENTAL Start time=Tue Mar 26 12:06:13 CST 2019
{ID=backup_1553573138808 Type=INCREMENTAL Start time=Tue Mar 26 12:05:39 CST 2019
{ID=backup_1553573104959 Type=INCREMENTAL Start time=Tue Mar 26 12:05:05 CST 2019
{ID=backup_1553573072418 Type=INCREMENTAL Start time=Tue Mar 26 12:04:33 CST 2019
{ID=backup_1553573037477 Type=INCREMENTAL Start time=Tue Mar 26 12:03:59 CST 2019
{ID=backup_1553573003850 Type=INCREMENTAL Start time=Tue Mar 26 12:03:24 CST 2019
{ID=backup_1553572969906 Type=INCREMENTAL Start time=Tue Mar 26 12:02:50 CST 2019
{ID=backup_1553572936870 Type=INCREMENTAL Start time=Tue Mar 26 12:02:17 CST 2019
{ID=backup_1553572919152 Type=FULL Start time=Tue Mar 26 12:01:59 CST 2019
{ID=backup_1553572884567 Type=INCREMENTAL Start time=Tue Mar 26 12:01:25 CST 2019
{ID=backup_1553572850231 Type=INCREMENTAL Start time=Tue Mar 26 12:00:50 CST 2019
{ID=backup_1553572815904 Type=INCREMENTAL Start time=Tue Mar 26 12:00:16 CST 2019
{ID=backup_1553572782582 Type=INCREMENTAL Start time=Tue Mar 26 11:59:43 CST 2019
{ID=backup_1553572749277 Type=INCREMENTAL Start time=Tue Mar 26 11:59:09 CST 2019
{ID=backup_1553572715583 Type=INCREMENTAL Start time=Tue Mar 26 11:58:36 CST 2019
{ID=backup_1553572681192 Type=INCREMENTAL Start time=Tue Mar 26 11:58:01 CST 2019
{ID=backup_1553572647241 Type=INCREMENTAL Start time=Tue Mar 26 11:57:27 CST 2019
{ID=backup_1553572614147 Type=INCREMENTAL Start time=Tue Mar 26 11:56:55 CST 2019
{ID=backup_1553572580295 Type=INCREMENTAL Start time=Tue Mar 26 11:56:20 CST 2019
{ID=backup_1553572562604 Type=FULL Start time=Tue Mar 26 11:56:03 CST 2019
{ID=backup_1553572528808 Type=INCREMENTAL Start time=Tue Mar 26 11:55:29 CST 2019
{ID=backup_1553572495824 Type=INCREMENTAL Start time=Tue Mar 26 11:54:56 CST 2019
{ID=backup_1553572460686 Type=INCREMENTAL Start time=Tue Mar 26 11:54:21 CST 2019
{ID=backup_1553572426623 Type=INCREMENTAL Start time=Tue Mar 26 11:53:47 CST 2019
{ID=backup_1553572393393 Type=INCREMENTAL Start time=Tue Mar 26 11:53:13 CST 2019
{ID=backup_1553572358905 Type=INCREMENTAL Start time=Tue Mar 26 11:52:39 CST 2019
{ID=backup_1553572325680 Type=INCREMENTAL Start time=Tue Mar 26 11:52:06 CST 2019
{ID=backup_1553572293384 Type=INCREMENTAL Start time=Tue Mar 26 11:51:33 CST 2019
{ID=backup_1553572259858 Type=INCREMENTAL Start time=Tue Mar 26 11:51:00 CST 2019
{ID=backup_1553572226776 Type=INCREMENTAL Start time=Tue Mar 26 11:50:27 CST 2019
{ID=backup_1553572209043 Type=FULL Start time=Tue Mar 26 11:50:09 CST 2019
{ID=backup_1553572176192 Type=INCREMENTAL Start time=Tue Mar 26 11:49:36 CST 2019
{ID=backup_1553572142467 Type=INCREMENTAL Start time=Tue Mar 26 11:49:03 CST 2019
{ID=backup_1553572108243 Type=INCREMENTAL Start time=Tue Mar 26 11:48:28 CST 2019
{ID=backup_1553572074607 Type=INCREMENTAL Start time=Tue Mar 26 11:47:55 CST 2019
{ID=backup_1553572040817 Type=INCREMENTAL Start time=Tue Mar 26 11:47:21 CST 2019
{ID=backup_1553572008463 Type=INCREMENTAL Start time=Tue Mar 26 11:46:49 CST 2019
{ID=backup_1553571975869 Type=INCREMENTAL Start time=Tue Mar 26 11:46:16 CST 2019
{ID=backup_1553571942648 Type=INCREMENTAL Start time=Tue Mar 26 11:45:43 CST 2019
{ID=backup_1553571909287 Type=INCREMENTAL Start time=Tue Mar 26 11:45:09 CST 2019
{ID=backup_1553571876299 Type=INCREMENTAL Start time=Tue Mar 26 11:44:36 CST 2019
{ID=backup_1553571858272 Type=FULL Start time=Tue Mar 26 11:44:18 CST 2019
{ID=backup_1553571823420 Type=INCREMENTAL Start time=Tue Mar 26 11:43:44 CST 2019
{ID=backup_1553571790811 Type=INCREMENTAL Start time=Tue Mar 26 11:43:11 CST 2019
{ID=backup_1553571759170 Type=INCREMENTAL Start time=Tue Mar 26 11:42:39 CST 2019
{ID=backup_1553571725809 Type=INCREMENTAL Start time=Tue Mar 26 11:42:06 CST 2019
{ID=backup_1553571691424 Type=INCREMENTAL Start time=Tue Mar 26 11:41:32 CST 2019
{ID=backup_1553571659257 Type=INCREMENTAL Start time=Tue Mar 26 11:40:59 CST 2019
{ID=backup_1553571624585 Type=INCREMENTAL Start time=Tue Mar 26 11:40:25 CST 2019
{ID=backup_1553571592803 Type=INCREMENTAL Start time=Tue Mar 26 11:39:53 CST 2019
{ID=backup_1553571558839 Type=INCREMENTAL Start time=Tue Mar 26 11:39:19 CST 2019
{ID=backup_1553571524437 Type=INCREMENTAL Start time=Tue Mar 26 11:38:45 CST 2019
{ID=backup_1553571506120 Type=FULL Start time=Tue Mar 26 11:38:26 CST 2019
{ID=backup_1553571471600 Type=INCREMENTAL Start time=Tue Mar 26 11:37:52 CST 2019
{ID=backup_1553571436202 Type=INCREMENTAL Start time=Tue Mar 26 11:37:16 CST 2019
{ID=backup_1553571403407 Type=INCREMENTAL Start time=Tue Mar 26 11:36:44 CST 2019
{ID=backup_1553571369423 Type=INCREMENTAL Start time=Tue Mar 26 11:36:10 CST 2019
{ID=backup_1553571336727 Type=INCREMENTAL Start time=Tue Mar 26 11:35:37 CST 2019
{ID=backup_1553571302148 Type=INCREMENTAL Start time=Tue Mar 26 11:35:02 CST 2019
{ID=backup_1553571267456 Type=INCREMENTAL Start time=Tue Mar 26 11:34:28 CST 2019
{ID=backup_1553571233365 Type=INCREMENTAL Start time=Tue Mar 26 11:33:53 CST 2019
{ID=backup_1553571201284 Type=INCREMENTAL Start time=Tue Mar 26 11:33:21 CST 2019
{ID=backup_1553571167438 Type=INCREMENTAL Start time=Tue Mar 26 11:32:48 CST 2019
{ID=backup_1553571149727 Type=FULL Start time=Tue Mar 26 11:32:30 CST 2019
{ID=backup_1553571116593 Type=INCREMENTAL Start time=Tue Mar 26 11:31:57 CST 2019
{ID=backup_1553571082945 Type=INCREMENTAL Start time=Tue Mar 26 11:31:24 CST 2019
{ID=backup_1553571048494 Type=INCREMENTAL Start time=Tue Mar 26 11:30:49 CST 2019
{ID=backup_1553571014719 Type=INCREMENTAL Start time=Tue Mar 26 11:30:15 CST 2019
{ID=backup_1553570981112 Type=INCREMENTAL Start time=Tue Mar 26 11:29:41 CST 2019
{ID=backup_1553570947686 Type=INCREMENTAL Start time=Tue Mar 26 11:29:08 CST 2019
{ID=backup_1553570915448 Type=INCREMENTAL Start time=Tue Mar 26 11:28:36 CST 2019
{ID=backup_1553570881136 Type=INCREMENTAL Start time=Tue Mar 26 11:28:01 CST 2019
{ID=backup_1553570848863 Type=INCREMENTAL Start time=Tue Mar 26 11:27:29 CST 2019
{ID=backup_1553570814005 Type=INCREMENTAL Start time=Tue Mar 26 11:26:54 CST 2019
{ID=backup_1553570796483 Type=FULL Start time=Tue Mar 26 11:26:37 CST 2019
{ID=backup_1553570761146 Type=INCREMENTAL Start time=Tue Mar 26 11:26:02 CST 2019
{ID=backup_1553570727246 Type=INCREMENTAL Start time=Tue Mar 26 11:25:27 CST 2019
{ID=backup_1553570694734 Type=INCREMENTAL Start time=Tue Mar 26 11:24:55 CST 2019
{ID=backup_1553570660492 Type=INCREMENTAL Start time=Tue Mar 26 11:24:21 CST 2019
{ID=backup_1553570626886 Type=INCREMENTAL Start time=Tue Mar 26 11:23:47 CST 2019
{ID=backup_1553570593820 Type=INCREMENTAL Start time=Tue Mar 26 11:23:14 CST 2019
{ID=backup_1553570560504 Type=INCREMENTAL Start time=Tue Mar 26 11:22:41 CST 2019
{ID=backup_1553570526852 Type=INCREMENTAL Start time=Tue Mar 26 11:22:07 CST 2019
{ID=backup_1553570492791 Type=INCREMENTAL Start time=Tue Mar 26 11:21:33 CST 2019
{ID=backup_1553570460561 Type=INCREMENTAL Start time=Tue Mar 26 11:21:01 CST 2019
{ID=backup_1553570441834 Type=FULL Start time=Tue Mar 26 11:20:42 CST 2019
{ID=backup_1553570407694 Type=INCREMENTAL Start time=Tue Mar 26 11:20:08 CST 2019
{ID=backup_1553570374275 Type=INCREMENTAL Start time=Tue Mar 26 11:19:34 CST 2019
{ID=backup_1553570339643 Type=INCREMENTAL Start time=Tue Mar 26 11:19:00 CST 2019
{ID=backup_1553570306426 Type=INCREMENTAL Start time=Tue Mar 26 11:18:27 CST 2019
{ID=backup_1553570273789 Type=INCREMENTAL Start time=Tue Mar 26 11:17:54 CST 2019
{ID=backup_1553570241672 Type=INCREMENTAL Start time=Tue Mar 26 11:17:22 CST 2019
{ID=backup_1553570208779 Type=INCREMENTAL Start time=Tue Mar 26 11:16:50 CST 2019
{ID=backup_1553570174016 Type=INCREMENTAL Start time=Tue Mar 26 11:16:14 CST 2019
{ID=backup_1553570140527 Type=INCREMENTAL Start time=Tue Mar 26 11:15:41 CST 2019
{ID=backup_1553570108155 Type=INCREMENTAL Start time=Tue Mar 26 11:15:08 CST 2019
{ID=backup_1553570090313 Type=FULL Start time=Tue Mar 26 11:14:50 CST 2019
{ID=backup_1553570055163 Type=INCREMENTAL Start time=Tue Mar 26 11:14:15 CST 2019
{ID=backup_1553570020547 Type=INCREMENTAL Start time=Tue Mar 26 11:13:41 CST 2019
{ID=backup_1553569986366 Type=INCREMENTAL Start time=Tue Mar 26 11:13:06 CST 2019
{ID=backup_1553569952111 Type=INCREMENTAL Start time=Tue Mar 26 11:12:32 CST 2019
{ID=backup_1553569919009 Type=INCREMENTAL Start time=Tue Mar 26 11:11:59 CST 2019
{ID=backup_1553569884803 Type=INCREMENTAL Start time=Tue Mar 26 11:11:25 CST 2019
{ID=backup_1553569852375 Type=INCREMENTAL Start time=Tue Mar 26 11:10:52 CST 2019
{ID=backup_1553569817578 Type=INCREMENTAL Start time=Tue Mar 26 11:10:18 CST 2019
{ID=backup_1553569783289 Type=INCREMENTAL Start time=Tue Mar 26 11:09:44 CST 2019
{ID=backup_1553569749812 Type=INCREMENTAL Start time=Tue Mar 26 11:09:10 CST 2019
{ID=backup_1553569731577 Type=FULL Start time=Tue Mar 26 11:08:52 CST 2019
{ID=backup_1553569696659 Type=INCREMENTAL Start time=Tue Mar 26 11:08:17 CST 2019
{ID=backup_1553569662598 Type=INCREMENTAL Start time=Tue Mar 26 11:07:43 CST 2019
{ID=backup_1553569629577 Type=INCREMENTAL Start time=Tue Mar 26 11:07:10 CST 2019
{ID=backup_1553569593132 Type=INCREMENTAL Start time=Tue Mar 26 11:06:34 CST 2019
{ID=backup_1553569561007 Type=INCREMENTAL Start time=Tue Mar 26 11:06:01 CST 2019
{ID=backup_1553569528701 Type=INCREMENTAL Start time=Tue Mar 26 11:05:29 CST 2019
{ID=backup_1553569494753 Type=INCREMENTAL Start time=Tue Mar 26 11:04:55 CST 2019
{ID=backup_1553569461159 Type=INCREMENTAL Start time=Tue Mar 26 11:04:21 CST 2019
{ID=backup_1553569427652 Type=INCREMENTAL Start time=Tue Mar 26 11:03:48 CST 2019
{ID=backup_1553569394396 Type=INCREMENTAL Start time=Tue Mar 26 11:03:15 CST 2019
{ID=backup_1553569374305 Type=FULL Start time=Tue Mar 26 11:02:54 CST 2019
{ID=backup_1553569340317 Type=INCREMENTAL Start time=Tue Mar 26 11:02:21 CST 2019
{ID=backup_1553569305158 Type=INCREMENTAL Start time=Tue Mar 26 11:01:46 CST 2019
{ID=backup_1553569272118 Type=INCREMENTAL Start time=Tue Mar 26 11:01:12 CST 2019
{ID=backup_1553569238667 Type=INCREMENTAL Start time=Tue Mar 26 11:00:39 CST 2019
{ID=backup_1553569204981 Type=INCREMENTAL Start time=Tue Mar 26 11:00:05 CST 2019
{ID=backup_1553569171706 Type=INCREMENTAL Start time=Tue Mar 26 10:59:32 CST 2019
{ID=backup_1553569138310 Type=INCREMENTAL Start time=Tue Mar 26 10:58:58 CST 2019
{ID=backup_1553569105743 Type=INCREMENTAL Start time=Tue Mar 26 10:58:26 CST 2019
{ID=backup_1553569071814 Type=INCREMENTAL Start time=Tue Mar 26 10:57:52 CST 2019
{ID=backup_1553569039555 Type=INCREMENTAL Start time=Tue Mar 26 10:57:20 CST 2019
{ID=backup_1553569021766 Type=FULL Start time=Tue Mar 26 10:57:02 CST 2019
{ID=backup_1553568986090 Type=INCREMENTAL Start time=Tue Mar 26 10:56:26 CST 2019
{ID=backup_1553568952403 Type=INCREMENTAL Start time=Tue Mar 26 10:55:53 CST 2019
{ID=backup_1553568919171 Type=INCREMENTAL Start time=Tue Mar 26 10:55:19 CST 2019
{ID=backup_1553568886292 Type=INCREMENTAL Start time=Tue Mar 26 10:54:46 CST 2019
{ID=backup_1553568850320 Type=INCREMENTAL Start time=Tue Mar 26 10:54:10 CST 2019
{ID=backup_1553568815987 Type=INCREMENTAL Start time=Tue Mar 26 10:53:36 CST 2019
{ID=backup_1553568783057 Type=INCREMENTAL Start time=Tue Mar 26 10:53:03 CST 2019
{ID=backup_1553568748571 Type=INCREMENTAL Start time=Tue Mar 26 10:52:29 CST 2019
{ID=backup_1553568716320 Type=INCREMENTAL Start time=Tue Mar 26 10:51:56 CST 2019
{ID=backup_1553568682965 Type=INCREMENTAL Start time=Tue Mar 26 10:51:23 CST 2019
{ID=backup_1553568663637 Type=FULL Start time=Tue Mar 26 10:51:04 CST 2019
```



//如果只有一个全量备份,还得测试一下

### 2.HBase自己的备份祖先逻辑

我们选取了第433行backup_1553568986090进行查看

hbase backup ancestor  backup_1553568986090  break false



backup_1553585738744
backup_1553575767098
backup_1553575733149
backup_1553575697465
backup_1553575663988
backup_1553575631417
backup_1553575598057
backup_1553575563883
backup_1553575529566
backup_1553575496314
backup_1553575462550
backup_1553575430172
backup_1553575412175
backup_1553575377881
backup_1553575344058
backup_1553575310422
backup_1553575277416
backup_1553575244498
backup_1553575211100
backup_1553575176074
backup_1553575140910
backup_1553575107214
backup_1553575072839
backup_1553575054529
backup_1553575020441
backup_1553574985907
backup_1553574953490
backup_1553574919155
backup_1553574885585
backup_1553574851370
backup_1553574818990
backup_1553574784417
backup_1553574751080
backup_1553574719085
backup_1553574700951
backup_1553574667325
backup_1553574632551
backup_1553574598101
backup_1553574565059
backup_1553574531199
backup_1553574497825
backup_1553574464306
backup_1553574429743
backup_1553574397548
backup_1553574364319
backup_1553574345909
backup_1553574312373
backup_1553574278283
backup_1553574244171
backup_1553574209761
backup_1553574173520
backup_1553574140857
backup_1553574106633
backup_1553574072761
backup_1553574040004
backup_1553574006745
backup_1553573988367
backup_1553573954196
backup_1553573920196
backup_1553573886733
backup_1553573853819
backup_1553573821533
backup_1553573789015
backup_1553573755510
backup_1553573721575
backup_1553573687017
backup_1553573652589
backup_1553573634136
backup_1553573599341
backup_1553573565195
backup_1553573531253
backup_1553573497863
backup_1553573464267
backup_1553573429411
backup_1553573395797
backup_1553573359100
backup_1553573325386
backup_1553573291915
backup_1553573274094
backup_1553573240102
backup_1553573206246
backup_1553573172980
backup_1553573138808
backup_1553573104959
backup_1553573072418
backup_1553573037477
backup_1553573003850
backup_1553572969906
backup_1553572936870
backup_1553572919152
backup_1553572884567
backup_1553572850231
backup_1553572815904
backup_1553572782582
backup_1553572749277
backup_1553572715583
backup_1553572681192
backup_1553572647241
backup_1553572614147
backup_1553572580295
backup_1553572562604
backup_1553572528808
backup_1553572495824
backup_1553572460686
backup_1553572426623
backup_1553572393393
backup_1553572358905
backup_1553572325680
backup_1553572293384
backup_1553572259858
backup_1553572226776
backup_1553572209043
backup_1553572176192
backup_1553572142467
backup_1553572108243
backup_1553572074607
backup_1553572040817
backup_1553572008463
backup_1553571975869
backup_1553571942648
backup_1553571909287
backup_1553571876299
backup_1553571858272
backup_1553571823420
backup_1553571790811
backup_1553571759170
backup_1553571725809
backup_1553571691424
backup_1553571659257
backup_1553571624585
backup_1553571592803
backup_1553571558839
backup_1553571524437
backup_1553571506120
backup_1553571471600
backup_1553571436202
backup_1553571403407
backup_1553571369423
backup_1553571336727
backup_1553571302148
backup_1553571267456
backup_1553571233365
backup_1553571201284
backup_1553571167438
backup_1553571149727
backup_1553571116593
backup_1553571082945
backup_1553571048494
backup_1553571014719
backup_1553570981112
backup_1553570947686
backup_1553570915448
backup_1553570881136
backup_1553570848863
backup_1553570814005
backup_1553570796483
backup_1553570761146
backup_1553570727246
backup_1553570694734
backup_1553570660492
backup_1553570626886
backup_1553570593820
backup_1553570560504
backup_1553570526852
backup_1553570492791
backup_1553570460561
backup_1553570441834
backup_1553570407694
backup_1553570374275
backup_1553570339643
backup_1553570306426
backup_1553570273789
backup_1553570241672
backup_1553570208779
backup_1553570174016
backup_1553570140527
backup_1553570108155
backup_1553570090313
backup_1553570055163
backup_1553570020547
backup_1553569986366
backup_1553569952111
backup_1553569919009
backup_1553569884803
backup_1553569852375
backup_1553569817578
backup_1553569783289
backup_1553569749812
backup_1553569731577
backup_1553569696659
backup_1553569662598
backup_1553569629577
backup_1553569593132
backup_1553569561007
backup_1553569528701
backup_1553569494753
backup_1553569461159
backup_1553569427652
backup_1553569394396
backup_1553569374305
backup_1553569340317
backup_1553569305158
backup_1553569272118
backup_1553569238667
backup_1553569204981
backup_1553569171706
backup_1553569138310
backup_1553569105743
backup_1553569071814
backup_1553569039555
backup_1553569021766
backup_1553568986090
backup_1553568952403
backup_1553568919171
backup_1553568886292
backup_1553568850320
backup_1553568815987
backup_1553568783057
backup_1553568748571
backup_1553568716320
backup_1553568682965
backup_1553568663637

### 3.选取正确时间区间的逻辑

hbase backup ancestor backup_1553568986090 break true

backup_1553568986090
backup_1553568952403
backup_1553568919171
backup_1553568886292
backup_1553568850320
backup_1553568815987
backup_1553568783057
backup_1553568748571
backup_1553568716320
backup_1553568682965
backup_1553568663637



### 4.只选取到最近的一个全量备份

这个是符合生产逻辑的

hbase backup ancestor backup_1553568986090 nearest

backup_1553585738744
backup_1553575767098